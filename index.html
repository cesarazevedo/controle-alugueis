<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Vencimentos - Aluguéis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOADING OVERLAY -->
<div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner"></div>
    <p>Carregando dados da planilha...</p>
</div>

<header class="header">
    <div class="header-content">
        <div>
            <h1>Controle de Vencimentos - Aluguéis</h1>
            <p class="header-sub">Consulta de imóveis, inquilinos e vencimentos</p>
        </div>
        <div class="header-actions">
            <button class="btn-header" onclick="window.print()" title="Imprimir">&#128424; Imprimir</button>
            <button class="btn-header" id="themeToggle" onclick="toggleTheme()" title="Alternar tema">&#9790; Modo Escuro</button>
        </div>
    </div>
</header>

<main class="main">

    <!-- FONTE DOS DADOS -->
    <div id="dataSource" class="data-source"></div>

    <!-- ALERTAS DE VENCIMENTO -->
    <div id="alertasVencimento" class="alertas-container"></div>

    <!-- FOTO DOS IMÓVEIS -->
    <section class="card photo-card">
        <img src="casa_0.png" alt="Foto das Casas 15, 16 e 16A" class="photo-imoveis">
    </section>

    <!-- RESUMO -->
    <section class="summary-row">
        <div class="summary-item green">
            <span class="summary-label">Receita Mensal Prevista</span>
            <span class="summary-value" id="summaryReceita">-</span>
        </div>
        <div class="summary-item blue">
            <span class="summary-label">Imóveis Alugados</span>
            <span class="summary-value" id="summaryImoveis">-</span>
        </div>
        <div class="summary-item orange">
            <span class="summary-label">Pagamentos em Atraso</span>
            <span class="summary-value" id="summaryAtraso">-</span>
        </div>
    </section>

    <!-- TABELA PRINCIPAL -->
    <section class="card">
        <h2 class="card-title">Quadro de Imóveis e Inquilinos</h2>
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>Casa</th>
                        <th>Valor do Aluguel</th>
                        <th>Dia de Pagamento</th>
                        <th>Inquilino</th>
                        <th>CPF</th>
                        <th>Início</th>
                        <th>Fim</th>
                        <th>Finalidade</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="mainTableBody"></tbody>
                <tfoot id="mainTableFoot"></tfoot>
            </table>
        </div>
        <p class="cpf-hint">* Clique no CPF para revelar/ocultar o número completo</p>
    </section>

    <!-- OBSERVACOES -->
    <section class="card">
        <h2 class="card-title">Observações</h2>
        <div class="obs-list" id="obsContainer"></div>
    </section>

    <!-- DETALHES DOS CONTRATOS -->
    <section class="card">
        <h2 class="card-title">Situação dos Contratos</h2>
        <div class="contratos-grid" id="contratosContainer"></div>
    </section>

    <!-- GRAFICO -->
    <section class="card">
        <h2 class="card-title">Movimentação Financeira</h2>
        <div id="graficoContainer"></div>
    </section>

    <!-- EXTRATO -->
    <section class="card">
        <div class="card-header-row">
            <h2 class="card-title" style="margin-bottom:0">Extrato de Poupança</h2>
            <div class="extrato-nav">
                <button class="btn-nav" onclick="changeExtrato(-1)">&#9664;</button>
                <span id="extratoMesLabel">Fevereiro/2025</span>
                <button class="btn-nav" onclick="changeExtrato(1)">&#9654;</button>
            </div>
        </div>
        <div class="extrato-resumo" id="extratoResumo">
            <div class="extrato-item">
                <span class="extrato-label">Saldo Anterior</span>
                <span class="extrato-valor" id="extSaldoAnt">-</span>
            </div>
            <div class="extrato-item">
                <span class="extrato-label">Disponível</span>
                <span class="extrato-valor destaque" id="extDisponivel">-</span>
            </div>
        </div>
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th class="text-center">Dia</th>
                        <th>Histórico</th>
                        <th class="text-right">Valor</th>
                    </tr>
                </thead>
                <tbody id="extratoBody"></tbody>
            </table>
        </div>
    </section>

</main>

<footer class="footer">
    <p>Controle de Vencimentos - Aluguéis &middot; Página de consulta</p>
    <p class="footer-update">Última atualização: <strong id="lastUpdate"></strong></p>
</footer>

<script src="app.js"></script>
</body>
</html>
